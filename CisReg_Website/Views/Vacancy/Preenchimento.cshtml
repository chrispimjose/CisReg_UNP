<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preenchimento de Vagas - CIS REG UNP</title>
    <!-- Importando Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Importando Tom Select -->
    <link href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
</head>
<body class="bg-gray-100">

    <!-- Container Principal -->
    <div class="container mx-auto mt-10 p-4 bg-white rounded shadow-lg max-w-2xl">
        <h2 class="text-2xl font-bold mb-6 text-center">Preenchimento de Vagas</h2>

        <!-- Dados do Paciente -->
        <div>
            <h3 class="text-xl font-semibold mb-4">Dados do Paciente</h3>
            <div class="grid gap-4">
                <input type="text" placeholder="Nome Completo" class="border rounded p-2 w-full">
                <input type="text" placeholder="CPF" class="border rounded p-2 w-full">
                <input type="date" placeholder="Data de Nascimento" class="border rounded p-2 w-full">
                <input type="text" placeholder="Cartão SUS" class="border rounded p-2 w-full">
                <input type="text" placeholder="CID" class="border rounded p-2 w-full">
                <input type="tel" placeholder="Telefone" class="border rounded p-2 w-full">
                <input type="text" placeholder="Nome da Mãe" class="border rounded p-2 w-full">
                <input type="text" placeholder="Nome do Pai" class="border rounded p-2 w-full">
            </div>
        </div>

        <!-- Dados da Vaga -->
        <div class="mt-6">
            <h3 class="text-xl font-semibold mb-4">Vaga</h3>
            <div class="grid gap-4">
                <!-- Tipo de Profissional -->
                <select id="tipoProfissional" class="border rounded p-2 w-full">
                    <option value="">Selecione o Tipo de Profissional</option>
                    <option value="saude">Profissional da Saúde</option>
                    <option value="psicologia">Profissional de Psicologia</option>
                    <option value="nutricao">Profissional de Nutrição</option>
                    <option value="fisioterapia">Profissional de Fisioterapia</option>
                </select>

                <!-- Especialidade -->
                <select id="especialidade" class="border rounded p-2 w-full" disabled>
                    <option value="">Selecione a Especialidade</option>
                </select>

                <!-- Subespecialidade -->
                <select id="subespecialidade" class="border rounded p-2 w-full" disabled>
                    <option value="">Selecione a Subespecialidade</option>
                </select>
            </div>
        </div>

        <!-- Botões de Ação -->
        <div class="flex justify-between mt-6">
            <button class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600" onclick="clearFields()">Voltar</button>
            <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600" onclick="showLoadingPopup()">Cadastrar</button>
        </div>
    </div>

    <!-- Popup de Carregando -->
    <div id="loadingPopup" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-4">
            <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-blue-500"></div>
            <p>Processando, por favor aguarde...</p>
        </div>
    </div>

    <!-- JavaScript para Tom Select -->
    <script>
        // Dados fictícios para exemplo
        const especialidades = {
            saude: ["Cardiologia", "Ortopedia", "Pediatria"],
            psicologia: ["Psicologia Clínica", "Psicologia Infantil"],
            nutricao: ["Nutrição Clínica", "Nutrição Esportiva"],
            fisioterapia: ["Fisioterapia Geral", "Reabilitação"]
        };

        const subespecialidades = {
            Cardiologia: ["Ecocardiografia", "Arritmias"],
            Ortopedia: ["Coluna", "Traumatologia"],
            Pediatria: ["Alergia Infantil", "Vacinação"],
            "Psicologia Clínica": ["Terapia Individual", "Terapia de Casal"],
            "Psicologia Infantil": ["Acompanhamento Escolar"],
            "Nutrição Clínica": ["Reeducação Alimentar"],
            "Nutrição Esportiva": ["Alto Rendimento"],
            "Fisioterapia Geral": ["Reabilitação Funcional"]
        };

        // Habilitando Tom Select nos selects
        new TomSelect("#tipoProfissional", {
            create: false,
            onChange: (value) => loadEspecialidades(value)
        });

        new TomSelect("#especialidade", {
            create: false,
            onChange: (value) => loadSubespecialidades(value)
        });

        new TomSelect("#subespecialidade", { create: false });

        // Funções de Carregamento
        function loadEspecialidades(tipo) {
            const especialidadeSelect = document.getElementById("especialidade").tomselect;
            const subespecialidadeSelect = document.getElementById("subespecialidade").tomselect;

            especialidadeSelect.clearOptions();
            subespecialidadeSelect.clearOptions();
            subespecialidadeSelect.disable();

            if (especialidades[tipo]) {
                especialidades[tipo].forEach(especialidade => {
                    especialidadeSelect.addOption({ value: especialidade, text: especialidade });
                });
                especialidadeSelect.enable();
            } else {
                especialidadeSelect.disable();
            }
        }

        function loadSubespecialidades(especialidade) {
            const subespecialidadeSelect = document.getElementById("subespecialidade").tomselect;

            subespecialidadeSelect.clearOptions();

            if (subespecialidades[especialidade]) {
                subespecialidades[especialidade].forEach(sub => {
                    subespecialidadeSelect.addOption({ value: sub, text: sub });
                });
                subespecialidadeSelect.enable();
            } else {
                subespecialidadeSelect.disable();
            }
        }

        function clearFields() {
            const tipoProfissional = document.getElementById("tipoProfissional").tomselect;
            const especialidadeSelect = document.getElementById("especialidade").tomselect;
            const subespecialidadeSelect = document.getElementById("subespecialidade").tomselect;

            tipoProfissional.clear();
            especialidadeSelect.clear();
            especialidadeSelect.disable();
            subespecialidadeSelect.clear();
            subespecialidadeSelect.disable();
        }
    </script>
</body>
</html>